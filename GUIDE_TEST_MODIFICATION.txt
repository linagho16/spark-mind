# ğŸ”§ Guide de test de la modification de rÃ©servation

## ğŸ§ª Outils de diagnostic crÃ©Ã©s

### 1. **test_modification.php**
Test complet avec formulaire intÃ©grÃ©
```
http://localhost/evennement/evennement/test_modification.php
```

### 2. **debug_reservation.php**
Debug simple pour voir les donnÃ©es POST
```
http://localhost/evennement/evennement/debug_reservation.php
```

## ğŸ“‹ Checklist de test

### Ã‰tape 1 : VÃ©rifier que les modifications sont enregistrÃ©es

1. Ouvrir : `http://localhost/evennement/evennement/test_modification.php`
2. Cliquer sur "ğŸ§ª Tester la modification"
3. VÃ©rifier le message de succÃ¨s

### Ã‰tape 2 : Tester via l'interface normale

1. Aller sur : `http://localhost/evennement/evennement/index.php?action=reservations`
2. Cliquer sur le bouton âœï¸ "Modifier" d'une rÃ©servation
3. Modifier le nom du client (ajouter " - MODIFIÃ‰")
4. Cliquer sur "Enregistrer les modifications"
5. VÃ©rifier que vous Ãªtes redirigÃ© vers la liste
6. VÃ©rifier que le nom a changÃ©

### Ã‰tape 3 : Debug si Ã§a ne marche pas

1. Ouvrir : `http://localhost/evennement/evennement/debug_reservation.php`
2. Modifier quelque chose dans le formulaire
3. Soumettre
4. VÃ©rifier que TOUTES les donnÃ©es sont bien reÃ§ues (âœ…)

## â“ Si Ã§a ne fonctionne toujours pas

### VÃ©rifier 1 : La base de donnÃ©es
```sql
SELECT * FROM reservations;
```
VÃ©rifier que la table existe et contient des donnÃ©es

### VÃ©rifier 2 : Les erreurs PHP
Activer l'affichage des erreurs dans `index.php` (ligne 3-4) :
```php
error_reporting(E_ALL);
ini_set('display_errors', 1);
```

### VÃ©rifier 3 : Le fichier process_reservation.php
Ligne 99, vÃ©rifier que l'action 'update' existe

### VÃ©rifier 4 : Les permissions
- Le serveur doit avoir les droits d'Ã©criture sur la base
- VÃ©rifier les identifiants MySQL dans config/config.php

## ğŸ” Ce qui a Ã©tÃ© corrigÃ©

âœ… Ajout de `event_id` dans la mÃ©thode `update()` du modÃ¨le
âœ… Ajout de `event_id` dans les donnÃ©es envoyÃ©es par `process_reservation.php`
âœ… Ajout d'un try/catch pour capturer les erreurs
âœ… CrÃ©ation d'outils de diagnostic

## ğŸ“ Structure de la modification

1. **Formulaire** (`views/reservations/edit.php`)
   â†’ Envoie POST vers `process_reservation.php?action=update&id=X`

2. **Traitement** (`process_reservation.php` case 'update')
   â†’ Valide et prÃ©pare les donnÃ©es
   â†’ Appelle `$reservation->update($id, $data)`

3. **ModÃ¨le** (`models/Reservation.php` mÃ©thode `update()`)
   â†’ ExÃ©cute UPDATE SQL
   â†’ Retourne true/false

4. **Redirection**
   â†’ SuccÃ¨s : Liste des rÃ©servations avec message âœ…
   â†’ Ã‰chec : Formulaire avec message d'erreur âŒ

## ğŸ¯ Test final

Pour vÃ©rifier que tout fonctionne :

1. CrÃ©er une rÃ©servation
2. La modifier (changer le nom)
3. VÃ©rifier dans la base avec phpMyAdmin
4. VÃ©rifier dans l'interface

Si tout est OK, vous devriez voir le changement partout !

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SparkMind - Demande d'Aide</title>

    <base href="/sparkmind_mvc_100percent/views/frontoffice/">

    <link rel="stylesheet" href="formulaire.css">
</head>

<body>
    <!-- Navigation Top Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="logo.jpg" alt="SparkMind Logo" class="brand-logo">
                <div class="brand-text">
                    <h1>SparkMind</h1>
                    <p>Quand la pens√©e devient espoir</p>
                </div>
            </div>
            <div class="nav-links">
                <a href="/sparkmind_mvc_100percent/index.php?page=main">Accueil</a>
                <a href="/sparkmind_mvc_100percent/index.php?page=demande" class="active">Demander de l'aide</a>
                <a href="/sparkmind_mvc_100percent/index.php?page=dons">Faire un don</a>
                <a href="/sparkmind_mvc_100percent/index.php?page=contact">Contact</a>
                <button class="btn-chatbot-nav" onclick="toggleChatbot()">
                    üí¨ Assistant
                </button>
            </div>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Faites le Premier Pas</h1>
            <p class="hero-subtitle">Votre demande d'aide commence ici. Nous sommes l√† pour vous accompagner avec bienveillance et confidentialit√©.</p>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number">2,500+</span>
                    <span class="stat-label">Personnes aid√©es</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">150+</span>
                    <span class="stat-label">Associations partenaires</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">24h</span>
                    <span class="stat-label">D√©lai de r√©ponse moyen</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Zone de notification -->
    <div id="notification" class="notification"></div>

    <!-- Main Content -->
    <div class="page-container">
        <!-- Sidebar Progress -->
        <aside class="sidebar-progress">
            <div class="progress-sticky">
                <h3>Votre Progression</h3>
                <div class="circular-progress">
                    <svg width="120" height="120">
                        <defs>
                            <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#166e6a;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#744ba1;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="60" cy="60" r="54" class="progress-bg"></circle>
                        <circle cx="60" cy="60" r="54" class="progress-bar-circle" id="progressCircle"></circle>
                    </svg>
                    <div class="progress-text">
                        <span id="progressPercent">0%</span>
                    </div>
                </div>
                <ul class="steps-list">
                    <li class="step-item active" data-step="1">
                        <span class="step-icon">üë§</span>
                        <span>Informations</span>
                    </li>
                    <li class="step-item" data-step="2">
                        <span class="step-icon">ü§ù</span>
                        <span>Type d'aide</span>
                    </li>
                    <li class="step-item" data-step="3">
                        <span class="step-icon">üìÑ</span>
                        <span>Description</span>
                    </li>
                    <li class="step-item" data-step="4">
                        <span class="step-icon">üìû</span>
                        <span>Contact</span>
                    </li>
                    <li class="step-item" data-step="5">
                        <span class="step-icon">üîí</span>
                        <span>Confidentialit√©</span>
                    </li>
                </ul>
                <div class="help-card">
                    <span class="help-icon">üí°</span>
                    <p>Besoin d'aide pour remplir le formulaire ?</p>
                    <button onclick="toggleChatbot()" class="btn-help-small">Parler √† l'assistant</button>
                </div>
            </div>
        </aside>

        <!-- Form Content -->
        <main class="form-content">
            <form id="helpForm" class="modern-form" novalidate>
                <!-- Section 1: Informations Personnelles -->
                <div class="form-card" data-section="1">
                    <div class="card-header">
                        <span class="card-number">1</span>
                        <div>
                            <h2>Qui √™tes-vous ?</h2>
                            <p>Commen√ßons par quelques informations de base</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <label>Nom complet <span class="required">*</span></label>
                            <input type="text" name="nom" placeholder="Ex: Ahmed Ben Ali">
                            <span class="input-icon">üë§</span>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label>√Çge <span class="required">*</span></label>
                                <input type="number" name="age" placeholder="Ex: 35">
                                <span class="input-icon">üéÇ</span>
                            </div>
                            <div class="input-group">
                                <label>Gouvernorat <span class="required">*</span></label>
                                <select name="gouvernorat">
                                    <option value="">Choisissez...</option>
                                    <option value="Tunis">Tunis</option>
                                    <option value="Ariana">Ariana</option>
                                    <option value="Ben Arous">Ben Arous</option>
                                    <option value="Manouba">Manouba</option>
                                    <option value="Nabeul">Nabeul</option>
                                    <option value="Zaghouan">Zaghouan</option>
                                    <option value="Bizerte">Bizerte</option>
                                    <option value="B√©ja">B√©ja</option>
                                    <option value="Jendouba">Jendouba</option>
                                    <option value="Kef">Kef</option>
                                    <option value="Siliana">Siliana</option>
                                    <option value="Sousse">Sousse</option>
                                    <option value="Monastir">Monastir</option>
                                    <option value="Mahdia">Mahdia</option>
                                    <option value="Sfax">Sfax</option>
                                    <option value="Kairouan">Kairouan</option>
                                    <option value="Kasserine">Kasserine</option>
                                    <option value="Sidi Bouzid">Sidi Bouzid</option>
                                    <option value="Gab√®s">Gab√®s</option>
                                    <option value="M√©denine">M√©denine</option>
                                    <option value="Tataouine">Tataouine</option>
                                    <option value="Gafsa">Gafsa</option>
                                    <option value="Tozeur">Tozeur</option>
                                    <option value="K√©bili">K√©bili</option>
                                </select>
                                <span class="input-icon">üìç</span>
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label>Ville/D√©l√©gation <span class="required">*</span></label>
                                <input type="text" name="ville" placeholder="Ex: La Marsa">
                                <span class="input-icon">üèòÔ∏è</span>
                            </div>
                            <div class="input-group">
                                <label>Situation familiale</label>
                                <select name="situation">
                                    <option value="">Choisissez...</option>
                                    <option value="seul">Seul(e)</option>
                                    <option value="famille">En famille</option>
                                    <option value="enfants">Avec enfants</option>
                                    <option value="parents">Avec parents √¢g√©s</option>
                                    <option value="autre">Autre</option>
                                </select>
                                <span class="input-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Type d'Aide -->
                <div class="form-card" data-section="2">
                    <div class="card-header">
                        <span class="card-number">2</span>
                        <div>
                            <h2>De quoi avez-vous besoin ?</h2>
                            <p>S√©lectionnez une ou plusieurs cat√©gories</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="help-categories">
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="alimentaire">
                                <div class="category-content">
                                    <span class="category-icon">üçΩÔ∏è</span>
                                    <h4>Aide alimentaire</h4>
                                    <p>Colis, repas</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="scolaire">
                                <div class="category-content">
                                    <span class="category-icon">üìö</span>
                                    <h4>Aide scolaire</h4>
                                    <p>Fournitures, frais</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="vestimentaire">
                                <div class="category-content">
                                    <span class="category-icon">üëï</span>
                                    <h4>V√™tements</h4>
                                    <p>Habits, chaussures</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="medicale">
                                <div class="category-content">
                                    <span class="category-icon">üè•</span>
                                    <h4>Aide m√©dicale</h4>
                                    <p>Soins, m√©dicaments</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="financiere">
                                <div class="category-content">
                                    <span class="category-icon">üí∞</span>
                                    <h4>Aide financi√®re</h4>
                                    <p>Soutien ponctuel</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="logement">
                                <div class="category-content">
                                    <span class="category-icon">üè†</span>
                                    <h4>Logement</h4>
                                    <p>Loyer, h√©bergement</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="professionnelle">
                                <div class="category-content">
                                    <span class="category-icon">üíº</span>
                                    <h4>Emploi</h4>
                                    <p>Formation, travail</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                            <label class="category-card">
                                <input type="checkbox" name="aide" value="psychologique">
                                <div class="category-content">
                                    <span class="category-icon">üí¨</span>
                                    <h4>Soutien psy</h4>
                                    <p>√âcoute, conseils</p>
                                </div>
                                <span class="check-mark">‚úì</span>
                            </label>
                        </div>

                        <div class="urgency-section">
                            <label class="section-label">Degr√© d'urgence <span class="required">*</span></label>
                            <div class="urgency-options">
                                <label class="urgency-card urgent-critical">
                                    <input type="radio" name="urgence" value="tres-urgent">
                                    <div class="urgency-content">
                                        <span class="urgency-dot"></span>
                                        <div>
                                            <h4>Tr√®s urgent</h4>
                                            <p>24-48 heures</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="urgency-card urgent-high">
                                    <input type="radio" name="urgence" value="urgent">
                                    <div class="urgency-content">
                                        <span class="urgency-dot"></span>
                                        <div>
                                            <h4>Urgent</h4>
                                            <p>Cette semaine</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="urgency-card urgent-medium">
                                    <input type="radio" name="urgence" value="important">
                                    <div class="urgency-content">
                                        <span class="urgency-dot"></span>
                                        <div>
                                            <h4>Important</h4>
                                            <p>Ce mois-ci</p>
                                        </div>
                                    </div>
                                </label>
                                <label class="urgency-card urgent-low">
                                    <input type="radio" name="urgence" value="peut-attendre">
                                    <div class="urgency-content">
                                        <span class="urgency-dot"></span>
                                        <div>
                                            <h4>Flexible</h4>
                                            <p>Peut attendre</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Description -->
                <div class="form-card" data-section="3">
                    <div class="card-header">
                        <span class="card-number">3</span>
                        <div>
                            <h2>Parlez-nous de votre situation</h2>
                            <p>Plus vous √™tes pr√©cis, mieux nous pouvons vous aider</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <label>D√©crivez votre situation <span class="required">*</span></label>
                            <textarea name="description_situation" rows="6" placeholder="Expliquez votre situation actuelle, vos difficult√©s et ce qui vous a amen√© √† faire cette demande..."></textarea>
                            <span class="char-counter"><span id="descCounter">0</span>/1000</span>
                        </div>

                        <div class="input-group">
                            <label>Que demandez-vous exactement ? <span class="required">*</span></label>
                            <textarea name="demande_exacte" rows="4" placeholder="Ex: 2 cartables pour mes enfants, une consultation chez le dentiste, 3 mois de loyer..."></textarea>
                            <span class="helper-text">üí° Soyez aussi pr√©cis que possible</span>
                        </div>
                    </div>
                </div>

                <!-- Section 4: Contact -->
                <div class="form-card" data-section="4">
                    <div class="card-header">
                        <span class="card-number">4</span>
                        <div>
                            <h2>Comment vous contacter ?</h2>
                            <p>Vos coordonn√©es restent confidentielles</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="input-row">
                            <div class="input-group">
                                <label>T√©l√©phone <span class="required">*</span></label>
                                <input type="tel" name="telephone" placeholder="+216 XX XXX XXX">
                                <span class="input-icon">üì±</span>
                            </div>
                            <div class="input-group">
                                <label>Email (optionnel)</label>
                                <input type="email" name="email" placeholder="votre@email.com">
                                <span class="input-icon">üìß</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label>Comment pr√©f√©rez-vous √™tre contact√© ? <span class="required">*</span></label>
                            <select name="preference_contact">
                                <option value="">Choisissez...</option>
                                <option value="appel">üìû Appel t√©l√©phonique</option>
                                <option value="sms">üí¨ SMS/WhatsApp</option>
                                <option value="email">üìß Email</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Quand √™tes-vous disponible ?</label>
                            <div class="time-chips">
                                <label class="chip">
                                    <input type="checkbox" name="horaires_disponibles" value="matin">
                                    <span>üåÖ Matin (8h-12h)</span>
                                </label>
                                <label class="chip">
                                    <input type="checkbox" name="horaires_disponibles" value="apres-midi">
                                    <span>‚òÄÔ∏è Apr√®s-midi (12h-18h)</span>
                                </label>
                                <label class="chip">
                                    <input type="checkbox" name="horaires_disponibles" value="soir">
                                    <span>üåô Soir (18h-21h)</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Confidentialit√© -->
                <div class="form-card" data-section="5">
                    <div class="card-header">
                        <span class="card-number">5</span>
                        <div>
                            <h2>Confidentialit√© et visibilit√©</h2>
                            <p>Contr√¥lez qui peut voir votre demande</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="privacy-info">
                            <span class="info-icon">üîí</span>
                            <p>Votre vie priv√©e est notre priorit√©. Choisissez le niveau de visibilit√© qui vous convient.</p>
                        </div>

                        <div class="visibility-options">
                            <label class="visibility-card">
                                <input type="radio" name="visibilite" value="publique">
                                <div class="visibility-content">
                                    <span class="visibility-icon">üåç</span>
                                    <h4>Publique</h4>
                                    <p>Visible par tous les donateurs et associations</p>
                                    <span class="visibility-badge"></span>
                                </div>
                                <span class="radio-check"></span>
                            </label>
                            <label class="visibility-card">
                                <input type="radio" name="visibilite" value="semi_privee">
                                <div class="visibility-content">
                                    <span class="visibility-icon">üë•</span>
                                    <h4>Semi-priv√©e</h4>
                                    <p>Visible uniquement par les associations v√©rifi√©es</p>
                                    <span class="visibility-badge"></span>
                                </div>
                                <span class="radio-check"></span>
                            </label>
                            <label class="visibility-card">
                                <input type="radio" name="visibilite" value="privee">
                                <div class="visibility-content">
                                    <span class="visibility-icon">üîí</span>
                                    <h4>Priv√©e</h4>
                                    <p>Visible uniquement par les administrateurs</p>
                                    <span class="visibility-badge"></span>
                                </div>
                                <span class="radio-check"></span>
                            </label>
                        </div>

                        <label class="anonymous-toggle">
                            <input type="checkbox" name="anonyme" value="1">
                            <div class="toggle-content">
                                <span class="toggle-icon">üé≠</span>
                                <div>
                                    <h4>Rester anonyme</h4>
                                    <p>Votre identit√© ne sera pas affich√©e publiquement</p>
                                </div>
                            </div>
                            <span class="toggle-switch"></span>
                        </label>

                        <div class="attestation-card">
                            <label class="attestation-checkbox">
                                <input type="checkbox" name="attestation">
                                <span class="checkbox-custom"></span>
                                <div class="attestation-text">
                                    <strong>J'atteste sur l'honneur</strong>
                                    <p>Les informations fournies sont exactes et ma demande est r√©elle. Je comprends que toute fausse d√©claration peut entra√Æner la suspension de mon compte.</p>
                                </div>
                            </label>
                        </div>

                        <div class="form-footer">
                            <button type="reset" class="btn-reset">
                                <span>üîÑ</span> Recommencer
                            </button>
                            <button type="submit" class="btn-submit">
                                <span>üöÄ</span> Envoyer ma demande
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </main>
    </div>

    <!-- Chatbot Widget -->
    <div id="chatbotWidget" class="chatbot-widget">
        <div class="chatbot-header">
            <div class="chatbot-avatar">ü§ñ</div>
            <div class="chatbot-title">
                <strong>Assistant SparkMind</strong>
                <small>En ligne maintenant</small>
            </div>
            <button class="chatbot-close" onclick="toggleChatbot()">‚úñ</button>
        </div>
        
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="chatbot-message bot">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <p>Bonjour ! üëã Je suis l√† pour vous aider √† remplir votre demande. N'h√©sitez pas √† me poser vos questions !</p>
                    <div class="quick-replies">
                        <button onclick="askBot('Comment remplir le formulaire ?')">üìù Aide formulaire</button>
                        <button onclick="askBot('Quels types d\'aide proposez-vous ?')">ü§ù Types d'aide</button>
                        <button onclick="askBot('Combien de temps pour une r√©ponse ?')">‚è∞ D√©lai de r√©ponse</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="chatbot-input">
            <input type="text" id="chatbotInput" placeholder="Tapez votre message..." onkeypress="handleChatKeypress(event)">
            <button onclick="sendChatMessage()">üì§</button>
        </div>
    </div>

    <!-- Floating Chatbot Button -->
    <button class="floating-chat-btn" onclick="toggleChatbot()">
        <span class="chat-icon">üí¨</span>
        <span class="chat-pulse"></span>
    </button>

    <script src="formulaire.js"></script>
</body>
</html>
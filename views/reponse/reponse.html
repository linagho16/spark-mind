<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SparkMind - Gestion des RÃ©ponses</title>
    <link rel="stylesheet" href="reponse.css">
</head>
<body>
    <!-- Container principal -->
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2>âœ¨ SparkMind</h2>
                <p>Gestion des RÃ©ponses</p>
            </div>
            <nav class="nav-menu">
                <a href="../backoffice/back.html" class="nav-item">
                    ğŸ“‹ Dashboard Admin
                </a>
                <a href="#" class="nav-item active">
                    ğŸ’¬ GÃ©rer les RÃ©ponses
                </a>
                <a href="#" class="nav-item">
                    ğŸ“Š Statistiques
                </a>
                <a href="#" class="nav-item">
                    ğŸ‘¥ Demandeurs
                </a>
                <a href="#" class="nav-item">
                    ğŸ“§ Notifications
                </a>
                <a href="#" class="nav-item">
                    âš™ï¸ Configuration
                </a>
                <a href="#" class="nav-item">
                    â“ Aide
                </a>
            </nav>
        </aside>

        <!-- Contenu principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1>ğŸ’¬ Gestion des RÃ©ponses aux Demandes</h1>
                <div class="user-info">
                    <span>ğŸ‘¤ Admin</span>
                </div>
            </header>

            <!-- Zone de notification -->
            <div id="notification" class="notification"></div>

            <!-- Statistiques des rÃ©ponses -->
            <section class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“©</div>
                    <div class="stat-info">
                        <h3 id="totalReponses">0</h3>
                        <p>Total RÃ©ponses</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">â³</div>
                    <div class="stat-info">
                        <h3 id="demandesSansReponse">0</h3>
                        <p>Sans RÃ©ponse</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-info">
                        <h3 id="demandesAvecReponse">0</h3>
                        <p>Avec RÃ©ponse</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“…</div>
                    <div class="stat-info">
                        <h3 id="reponsesDuJour">0</h3>
                        <p>Aujourd'hui</p>
                    </div>
                </div>
            </section>

            <!-- Filtres et recherche -->
            <section class="filters-section">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ğŸ” Rechercher par ID, nom, administrateur...">
                </div>
                <div class="filter-group">
                    <select id="filterStatut">
                        <option value="">Tous les statuts</option>
                        <option value="en_attente">En attente</option>
                        <option value="en_cours">En cours</option>
                        <option value="traite">TraitÃ©</option>
                        <option value="rejete">RejetÃ©</option>
                    </select>
                    <select id="filterAvecReponse">
                        <option value="">Toutes les demandes</option>
                        <option value="avec">Avec rÃ©ponse</option>
                        <option value="sans">Sans rÃ©ponse</option>
                    </select>
                    <button id="btnReset" class="btn-reset">ğŸ”„ RÃ©initialiser</button>
                </div>
            </section>

            <!-- Tableau des demandes avec rÃ©ponses -->
            <section class="table-section">
                <div class="table-header">
                    <h2>ğŸ“‹ Liste des Demandes</h2>
                    <button id="btnRefresh" class="btn-refresh">ğŸ”„ Actualiser</button>
                </div>
                <div class="table-responsive">
                    <table id="demandesTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Demandeur</th>
                                <th>Statut</th>
                                <th>Urgence</th>
                                <th>Date Demande</th>
                                <th>RÃ©ponses</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Les donnÃ©es seront chargÃ©es dynamiquement -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button id="btnPrev" class="btn-pagination">â† PrÃ©cÃ©dent</button>
                    <span id="pageInfo">Page 1</span>
                    <button id="btnNext" class="btn-pagination">Suivant â†’</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal pour voir les rÃ©ponses -->
    <div id="modalReponses" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>ğŸ’¬ RÃ©ponses pour la demande #<span id="modalDemandeId"></span></h2>
                <button class="close-btn" onclick="closeModal('modalReponses')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Informations de la demande -->
                <div class="demande-info">
                    <h3>ğŸ“‹ Informations de la demande</h3>
                    <div class="info-grid">
                        <div><strong>Demandeur:</strong> <span id="infoNom"></span></div>
                        <div><strong>Email:</strong> <span id="infoEmail"></span></div>
                        <div><strong>TÃ©lÃ©phone:</strong> <span id="infoTelephone"></span></div>
                        <div><strong>Urgence:</strong> <span id="infoUrgence"></span></div>
                        <div class="full-width"><strong>Description:</strong> <span id="infoDescription"></span></div>
                    </div>
                </div>

                <!-- Liste des rÃ©ponses -->
                <div class="reponses-list">
                    <h3>ğŸ’¬ Historique des rÃ©ponses (<span id="nbReponses">0</span>)</h3>
                    <div id="reponsesContainer">
                        <!-- Les rÃ©ponses seront chargÃ©es ici -->
                    </div>
                </div>

                <!-- Formulaire d'ajout de rÃ©ponse -->
                <div class="add-reponse-form">
                    <h3>âœï¸ Ajouter une rÃ©ponse</h3>
                    <form id="formAddReponse">
                        <input type="hidden" id="reponseDemandeId">
                        <div class="form-group">
                            <label>Administrateur:</label>
                            <input type="text" id="reponseAdmin" placeholder="Votre nom" required>
                        </div>
                        <div class="form-group">
                            <label>Message de rÃ©ponse:</label>
                            <textarea id="reponseMessage" rows="4" placeholder="Votre rÃ©ponse Ã  la demande..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Changer le statut de la demande:</label>
                            <select id="reponseStatut">
                                <option value="">Ne pas modifier</option>
                                <option value="en_cours">En cours de traitement</option>
                                <option value="traite">TraitÃ©</option>
                                <option value="rejete">RejetÃ©</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-submit">ğŸ“¤ Envoyer la rÃ©ponse</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour supprimer une rÃ©ponse -->
    <div id="modalDeleteReponse" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>âš ï¸ Confirmation de suppression</h2>
                <button class="close-btn" onclick="closeModal('modalDeleteReponse')">&times;</button>
            </div>
            <div class="modal-body">
                <p>ÃŠtes-vous sÃ»r de vouloir supprimer cette rÃ©ponse ?</p>
                <p class="warning-text">Cette action est irrÃ©versible.</p>
                <div class="modal-actions">
                    <button class="btn-cancel" onclick="closeModal('modalDeleteReponse')">Annuler</button>
                    <button class="btn-delete" id="confirmDeleteReponse">Supprimer</button>
                </div>
            </div>
        </div>
    </div>

    <script src="reponse.js"></script>
</body>
</html>